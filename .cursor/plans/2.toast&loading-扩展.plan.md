<!-- caa8f6a1-420a-430f-8b4d-3e7f0c51c306 8e81e7a8-fe6b-4829-97dd-3769d66542ee -->
# Toast 和 Loading 功能扩展计划

## 一、Toast 功能扩展

### 1.1 API 层扩展 (`lib/src/apis/pop.dart` 和 `lib/src/apis/toast.dart`)

- 在 `Pop.toast()` 方法中添加新参数：
- `String? customImagePath` - 自定义图片路径（可选）
- `double? imageSize` - 图片大小，默认值 24.0
- `Axis layoutDirection` - 布局方向，默认 `Axis.horizontal` (Row)
- 更新 `_toastImpl()` 函数，传递新参数到 `ToastWidget`

### 1.2 Widget 层改造 (`lib/src/widgets/toast_widget.dart`)

- 在 `ToastWidget` 构造函数中添加新参数：
- `String? customImagePath`
- `double? imageSize` (默认 24.0)
- `Axis layoutDirection` (默认 `Axis.horizontal`)
- 改造 36-52 行的 switch 逻辑：
- 如果提供了 `customImagePath`，则使用自定义图片，覆盖 `toastType` 的图标
- 否则使用 `toastType` 对应的默认图标
- 修改布局逻辑：
- 使用 `layoutDirection` 决定使用 `Row` 或 `Column`
- Column 布局时：图片在上，文字在下
- Row 布局时：图片在左，文字在右（保持现有行为）
- 更新图片显示逻辑，使用 `imageSize` 参数

## 二、Loading 功能扩展

### 2.1 API 层扩展 (`lib/src/apis/pop.dart` 和 `lib/src/apis/loading.dart`)

- 在 `Pop.loading()` 方法中添加新参数：
- `Widget? customIndicator` - 自定义 Widget（通常是图片）
- `Duration rotationDuration` - 旋转动画持续时间，默认 `Duration(seconds: 1)`
- 更新 `_loadingImpl()` 函数，传递新参数到 `LoadingWidget`

### 2.2 Widget 层改造 (`lib/src/widgets/loading_widget.dart`)

- 将 `LoadingWidget` 从 `StatelessWidget` 改为 `StatefulWidget`（需要 `AnimationController`）
- 添加新参数到构造函数：
- `Widget? customIndicator`
- `Duration rotationDuration`
- 实现旋转动画：
- 使用 `AnimationController` 和 `RotationTransition`
- 如果提供了 `customIndicator`，将其包裹在旋转动画中
- 如果没有提供 `customIndicator`，保持原有的 `CircularProgressIndicator` 行为
- 确保 Container 为正方形：
- 当同时有 `message` 和 `customIndicator` 时，使用 `AspectRatio` 或固定尺寸确保 Container 为正方形
- 计算合适的尺寸（考虑 padding 和内容）

## 三、文件修改清单

1. `lib/src/apis/pop.dart` - 更新 `Pop.toast()` 和 `Pop.loading()` 方法签名
2. `lib/src/apis/toast.dart` - 更新 `_toastImpl()` 函数
3. `lib/src/widgets/toast_widget.dart` - 改造 ToastWidget，支持自定义图片和布局
4. `lib/src/apis/loading.dart` - 更新 `_loadingImpl()` 函数
5. `lib/src/widgets/loading_widget.dart` - 改造为 StatefulWidget，添加旋转动画

### To-dos

- [ ] 在 Pop.toast() 和 _toastImpl() 中添加 customImagePath、imageSize、layoutDirection 参数
- [ ] 改造 ToastWidget：支持自定义图片覆盖 toastType、图片大小配置、Row/Column 布局切换
- [ ] 在 Pop.loading() 和 _loadingImpl() 中添加 customIndicator、rotationDuration 参数
- [ ] 将 LoadingWidget 改为 StatefulWidget，实现旋转动画，确保 Container 为正方形